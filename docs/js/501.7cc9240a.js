"use strict";(globalThis["webpackChunkquasar_project"]=globalThis["webpackChunkquasar_project"]||[]).push([[501],{6501:(t,e,a)=>{a.r(e),a.d(e,{default:()=>O});var o=a(9835),n=a(6970);const i={class:"q-pa-md"},s=["src"],r=(0,o._)("span",{class:"text-caption q-px-sm"},"x",-1),d=["src"];function u(t,e,a,u,l,c){const m=(0,o.up)("q-item-label"),p=(0,o.up)("q-item-section"),g=(0,o.up)("q-badge"),h=(0,o.up)("q-icon"),w=(0,o.up)("q-item"),f=(0,o.up)("q-separator"),T=(0,o.up)("q-btn"),y=(0,o.up)("q-list");return(0,o.wg)(),(0,o.iD)("div",i,[t.cart?.contents?.nodes.length?((0,o.wg)(),(0,o.j4)(y,{key:0,bordered:"",padding:""},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{header:""},{default:(0,o.w5)((()=>[(0,o.Uk)("GIỎ HÀNG")])),_:1}),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.cart.contents.nodes,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.key},[(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,{top:"",thumbnail:"",class:"q-ml-none"},{default:(0,o.w5)((()=>[(0,o._)("img",{src:e.product.node.featuredImage.node.sourceUrl},null,8,s)])),_:2},1024),(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.product.node.name)+" ",1),r,(0,o.Wm)(g,{outline:"",color:"primary",onClick:a=>t.confirmupdateItemQuantities(e.key,e.product.node.name,e.quantity)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.quantity),1)])),_:2},1032,["onClick"])])),_:2},1024),(0,o.Wm)(m,{caption:""},{default:(0,o.w5)((()=>[(0,o.Uk)("Số tiền: "+(0,n.zw)(e.total),1)])),_:2},1024)])),_:2},1024),(0,o.Wm)(p,{side:"",top:""},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{name:"clear",size:"xs",onClick:a=>t.confirmRemoveItemFromCart(e.key)},null,8,["onClick"])])),_:2},1024)])),_:2},1024),(0,o.Wm)(f,{spaced:""})])))),128)),(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Tạm tính")])),_:1}),(0,o.Wm)(p,{side:"",top:""},{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(t.cart.subtotal),1)])),_:1})])),_:1})])),_:1}),(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Phí vận chuyển")])),_:1}),(0,o.Wm)(p,{side:"",top:""},{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(t.cart.shippingTotal),1)])),_:1})])),_:1})])),_:1}),(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Giảm giá")])),_:1}),(0,o.Wm)(m,{caption:""},{default:(0,o.w5)((()=>[(0,o.Uk)("Áp dụng mã giảm giá")])),_:1})])),_:1}),(0,o.Wm)(p,{side:"",top:""},{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(t.cart.discountTotal),1)])),_:1})])),_:1})])),_:1}),(0,o.Wm)(f,{spaced:"",inset:"item"}),(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Tổng")])),_:1}),(0,o.Wm)(p,{side:"",top:""},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{class:"text-bold"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(t.cart.total),1)])),_:1})])),_:1})])),_:1}),(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(T,{outline:"",label:"THANH TOÁN",type:"submit",color:"primary"})])),_:1})])),_:1})])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(y,{bordered:"",padding:""},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{header:""},{default:(0,o.w5)((()=>[(0,o.Uk)("SẢN PHẨM")])),_:1}),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.products,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.productId},[(0,o.Wm)(w,null,{default:(0,o.w5)((()=>[(0,o.Wm)(p,{top:"",thumbnail:"",class:"q-ml-none"},{default:(0,o.w5)((()=>[(0,o._)("img",{src:e?.featuredImage.node.sourceUrl},null,8,d)])),_:2},1024),(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(m,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(e.name),1)])),_:2},1024),(0,o.Wm)(m,{caption:""},{default:(0,o.w5)((()=>[(0,o.Uk)("Giá: "+(0,n.zw)(e.price),1)])),_:2},1024)])),_:2},1024),(0,o.Wm)(p,{side:"",top:""},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{caption:""},{default:(0,o.w5)((()=>[(0,o.Uk)("Thêm")])),_:1}),(0,o.Wm)(h,{name:"add_shopping_cart",onClick:a=>t.confirmAddToCart(e.productId)},null,8,["onClick"])])),_:2},1024)])),_:2},1024),(0,o.Wm)(f,{spaced:""})])))),128))])),_:1})])}var l=a(1926),c=a(2274),m=a(5039),p=a(631);const g="siE2Tnd2dwjgMPdkd8331BB7PpCPhvDp",h=(0,l.L)({uri:`https://store.amycos.vn/wordpress/${g}`}),w=new c.h,f=new m.i(((t,e)=>{const a=localStorage.getItem("woo-session");return a&&t.setContext((({headers:t={}})=>({headers:{"woocommerce-session":`Session ${a}`}}))),e(t)})),T=new m.i(((t,e)=>e(t).map((e=>{const a=t.getContext(),{response:{headers:o}}=a,n=o.get("woocommerce-session");return n&&("false"===n?localStorage.removeItem("woo-session"):localStorage.getItem("woo-session")!==n&&localStorage.setItem("woo-session",o.get("woocommerce-session"))),e})))),y=new p.f({link:f.concat(T.concat(h)),cache:w}),I=y;var k=a(7873),_=a(6950),b=(a(9120),a(8359)),W=a(4328),x=a(796);const v=(0,o.aZ)({name:"IndexPage",data(){return{products:[],cart:{}}},methods:{confirmAddToCart(t){this.$q.dialog({title:"Thêm vào giỏ hàng",message:"Số lượng",prompt:{model:1,type:"text"},cancel:!0,persistent:!0}).onOk((e=>{this.addToCart({productId:t,quantity:parseInt(e)})}))},confirmupdateItemQuantities(t,e,a){this.$q.dialog({title:"Cập nhật số lượng",message:e,prompt:{model:a,type:"text"},cancel:!0,persistent:!0}).onOk((e=>{this.updateItemQuantities({key:t,quantity:parseInt(e)})}))},async addToCart({productId:t,quantity:e=1}){_.Z.show();try{const{data:a}=await I.mutate({mutation:k.ZP`
            mutation ($input: AddToCartInput!) {
              addToCart(input: $input) {
                cart {
                  appliedCoupons {
                    code
                  }
                  contents {
                    nodes {
                      key
                      product {
                        node {
                          id
                          databaseId
                          name
                          type
                          featuredImage {
                            node {
                              id
                              sourceUrl
                            }
                          }
                        }
                      }
                      variation {
                        node {
                          id
                          databaseId
                          name
                          description
                          type
                          onSale
                          price
                          regularPrice
                          salePrice
                          featuredImage {
                            node {
                              id
                              sourceUrl
                            }
                          }
                          attributes {
                            nodes {
                              id
                              name
                              value
                            }
                          }
                        }
                      }
                      quantity
                      total
                      subtotal
                      subtotalTax
                    }
                  }
                  subtotal
                  subtotalTax
                  shippingTax
                  shippingTotal
                  total
                  totalTax
                  feeTax
                  feeTotal
                  discountTax
                  discountTotal
                }
              }
            }
          `,variables:{input:{productId:parseInt(t),quantity:e}}});_.Z.hide(),this.cart=a.addToCart.cart,W.Z.create({type:"positive",message:"Đã thêm vào giỏ hàng!"})}catch(a){W.Z.create({type:"negative",message:"Không thể thêm sản phẩm hết hàng!"})}},confirmRemoveItemFromCart(t,e="Bạn muốn xóa sản phẩm khỏi giỏ hàng?"){this.$q.dialog({title:"Xóa sản phẩm giỏ hàng",message:e,ok:{push:!0},cancel:{color:"negative"},persistent:!0}).onOk((()=>{this.removeItemsFromCart(t)}))},async removeItemsFromCart(t){_.Z.show({spinner:b.Z,spinnerSize:"100px"});try{const{data:e}=await I.mutate({mutation:k.ZP`
            mutation CLEAR_CART_MUTATION($input: RemoveItemsFromCartInput!) {
              removeItemsFromCart(input: $input) {
                cart {
                  appliedCoupons {
                    code
                  }
                  contents {
                    nodes {
                      key
                      product {
                        node {
                          id
                          databaseId
                          name
                          type
                          featuredImage {
                            node {
                              id
                              sourceUrl
                            }
                          }
                        }
                      }
                      variation {
                        node {
                          id
                          databaseId
                          name
                          description
                          type
                          onSale
                          price
                          regularPrice
                          salePrice
                          featuredImage {
                            node {
                              id
                              sourceUrl
                            }
                          }
                          attributes {
                            nodes {
                              id
                              name
                              value
                            }
                          }
                        }
                      }
                      quantity
                      total
                      subtotal
                      subtotalTax
                    }
                  }
                  subtotal
                  subtotalTax
                  shippingTax
                  shippingTotal
                  total
                  totalTax
                  feeTax
                  feeTotal
                  discountTax
                  discountTotal
                }
              }
            }
          `,variables:{input:{keys:t}}});_.Z.hide(),this.cart=e.removeItemsFromCart.cart,W.Z.create({type:"positive",message:"Đã xóa sản phẩm giỏ hàng!"})}catch(e){_.Z.hide(),W.Z.create({type:"negative",message:"Không thể xóa sản phẩm giỏ hàng!"})}},async updateItemQuantities(t,e){_.Z.show({spinner:b.Z,spinnerSize:"100px"});try{const{data:a}=await I.mutate({mutation:k.ZP`
            mutation UPDATE_CART_ITEM_MUTATION(
              $input: UpdateItemQuantitiesInput!
            ) {
              updateItemQuantities(input: $input) {
                cart {
                  appliedCoupons {
                    code
                  }
                  contents {
                    nodes {
                      key
                      product {
                        node {
                          id
                          databaseId
                          name
                          type
                          featuredImage {
                            node {
                              id
                              sourceUrl
                            }
                          }
                        }
                      }
                      variation {
                        node {
                          id
                          databaseId
                          name
                          description
                          type
                          onSale
                          price
                          regularPrice
                          salePrice
                          featuredImage {
                            node {
                              id
                              sourceUrl
                            }
                          }
                          attributes {
                            nodes {
                              id
                              name
                              value
                            }
                          }
                        }
                      }
                      quantity
                      total
                      subtotal
                      subtotalTax
                    }
                  }
                  subtotal
                  subtotalTax
                  shippingTax
                  shippingTotal
                  total
                  totalTax
                  feeTax
                  feeTotal
                  discountTax
                  discountTotal
                }
              }
            }
          `,variables:{input:{clientMutationId:(0,x.Z)(),items:{key:t,quantity:e}}}});_.Z.hide(),this.cart=a.updateItemQuantities.cart,W.Z.create({type:"positive",message:"Hoàn thành cập nhật giỏ hàng!"})}catch(a){_.Z.hide(),W.Z.create({type:"negative",message:"Có lỗi khi cập nhật số lượng!"})}},async loadProducts(){const{data:t}=await I.query({query:k.ZP`
          query (
            $first: Int
            $after: String
            $where: RootQueryToProductConnectionWhereArgs
          ) {
            products(first: $first, after: $after, where: $where) {
              nodes {
                id
                productId: databaseId
                averageRating
                slug
                sku
                featuredImage {
                  node {
                    id
                    altText
                    sourceUrl(size: WOOCOMMERCE_THUMBNAIL)
                  }
                }
                name
                ... on SimpleProduct {
                  price
                  regularPrice
                  stockQuantity
                  id
                }
                ... on VariableProduct {
                  price
                  stockQuantity
                  id
                  regularPrice
                }
                ... on ExternalProduct {
                  price
                  id
                  externalUrl
                  regularPrice
                }
                ... on GroupProduct {
                  id
                  products {
                    nodes {
                      ... on SimpleProduct {
                        id
                        price
                        regularPrice
                      }
                    }
                  }
                }
              }
            }
          }
        `});this.products=t.products.nodes},async loadCart(){_.Z.show();const{data:t}=await I.query({query:k.ZP`
          query GET_CART {
            cart {
              contents {
                nodes {
                  key
                  product {
                    node {
                      id
                      databaseId
                      name
                      type
                      featuredImage {
                        node {
                          id
                          sourceUrl
                        }
                      }
                    }
                  }
                  variation {
                    node {
                      id
                      databaseId
                      name
                      description
                      type
                      onSale
                      price
                      regularPrice
                      salePrice
                      featuredImage {
                        node {
                          id
                          sourceUrl
                        }
                      }
                      attributes {
                        nodes {
                          id
                          name
                          value
                        }
                      }
                    }
                  }
                  quantity
                  total
                  subtotal
                  subtotalTax
                }
              }
              subtotal
              subtotalTax
              shippingTax
              shippingTotal
              total
              totalTax
              feeTax
              feeTotal
              discountTax
              discountTotal
            }
          }
        `});this.cart=t.cart,_.Z.hide()}},mounted(){_.Z.show()}});var C=a(1639),q=a(3246),Z=a(3115),U=a(490),P=a(6749),S=a(990),Q=a(2857),$=a(926),z=a(963),A=a(9984),R=a.n(A);const M=(0,C.Z)(v,[["render",u]]),O=M;R()(v,"components",{QList:q.Z,QItemLabel:Z.Z,QItem:U.Z,QItemSection:P.Z,QBadge:S.Z,QIcon:Q.Z,QSeparator:$.Z,QBtn:z.Z})}}]);